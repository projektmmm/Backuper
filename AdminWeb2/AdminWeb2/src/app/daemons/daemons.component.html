<div class="page-header" color="primary">
    Send New Settings
</div>

<input #RunAt ng-model="RunAt" hidden>

<mat-grid-list cols="2" rowHeight="2:1">
    <mat-grid-tile>
        <div class="form">
            <div class="page-subheader">
                Backup settings
            </div>
            <form class="form-settings">
                <mat-form-field class="width-full">
                    <input matInput #DaemonId type="number" ng-model="DaemonId"  min="0" placeholder="DaemonId" value="">
                </mat-form-field>
                <mat-form-field class="width-full">
                    <input matInput #Cron type="text" ng-model="Cron" placeholder="Cron" disabled="true">
                </mat-form-field>
                <mat-form-field class="width-full">
                    <mat-select placeholder="BackupType" #BackupType ng-model="BackupType" value="">
                        <mat-option *ngFor="let backup of backups" [value]="backup.value">
                            {{ backup.viewValue }}
                        </mat-option>
                    </mat-select>
                </mat-form-field>
                <mat-form-field class="width-full">
                    <input matInput #SourcePath type="text" ng-model="SourcePath" placeholder="SourcePath" value="" [formControl]="SourcePathFormControl" [errorStateMatcher]="SourcePathmatcher"> 
                    <mat-error *ngIf="SourcePathFormControl.hasError('pattern') && !SourcePathFormControl.hasError('required')">
                        Please enter a valid pattern
                    </mat-error>
                    <mat-error *ngIf="SourcePathFormControl.hasError('required')">
                        Path is <strong>required</strong>
                    </mat-error>
                </mat-form-field>
                <mat-form-field class="width-full">
                    <input matInput #DestinationPath type="text" ng-model="DestinationPath" placeholder="DestinationPath" value="" [formControl]="DestinationPathFormControl" [errorStateMatcher]="DestinationPathmatcher">
                    <mat-error *ngIf="DestinationPathFormControl.hasError('pattern') && !DestinationPathFormControl.hasError('required')">
                        Please enter a valid pattern
                    </mat-error>
                    <mat-error *ngIf="DestinationPathFormControl.hasError('required')">
                        Path is <strong>required</strong>
                    </mat-error>
                </mat-form-field>
            </form>
        </div>
        <div>
            <button mat-raised-button color="primary" class="form-settings-button" (click)="Send(DaemonId.value,RunAt.value,Cron.value,BackupType.value,SourcePath.value,DestinationPath.value)">
                Send Settings
            </button>
        </div>
    </mat-grid-tile>
    <mat-grid-tile>
        <div class="form">
            <div class="page-subheader">
                Repeat settings    
            </div>
            <mat-tab-group>
                <mat-tab label="Minutes">
                    <div class="tab-padding">
                        Every
                        <mat-form-field class="width-quarter">
                            <input matInput #EMMinutes ng-model="EMMinutes" type="number" min="1" max="59" placeholder="minute(s)">                    
                        </mat-form-field>     
                        <button mat-raised-button color="primary" class="tab-button" (click)="UpdateCronMinutes(EMMinutes, Cron)">
                            Update Cron
                        </button>
                    </div>
                </mat-tab>
                <mat-tab label="Hourly">
                    <div class="tab-padding">
                        <mat-radio-group>
                            <div>
                                <mat-radio-button #EveryHourRadioHourly checked="true" ng-model="EveryHourRadioHourly" value="1">Every</mat-radio-button>
                                <mat-form-field class="width-small">
                                    <input matInput #EveryHourHourly ng-model="EveryHourHourly" type="number" min="1" max="59" placeholder="Hour(s)">                    
                                </mat-form-field>               
                            </div>
                            <div>
                                <mat-radio-button #StartEveryHourRadioHourly ng-model="StartEveryHourRadioHourly" value="2">Start every</mat-radio-button>
                                <mat-form-field class="width-small">
                                    <input matInput #StartEveryHourHourly ng-model="StartEveryHourHourly" type="number" min="0" max="23" placeholder="Hour">                    
                                </mat-form-field>
                                :
                                <mat-form-field class="width-small">
                                    <input matInput #StartEveryMinuteHourly ng-model="StartEveryMinuteHourly" type="number" min="0" max="59" placeholder="Minute">                    
                                </mat-form-field>               
                            </div>
                        </mat-radio-group>
                        <button mat-raised-button color="primary" class="tab-button" (click)="UpdateCronHourly(Cron, EveryHourRadioHourly, StartEveryHourRadioHourly, EveryHourHourly, StartEveryHourHourly, StartEveryMinuteHourly)">
                            Update Cron
                        </button>                 
                    </div>
                </mat-tab>
                <mat-tab label="Daily">
                    <div class="tab-padding">
                        <mat-radio-group>
                            <div>
                                <mat-radio-button #RadioOneDaily checked="true" ng-model="RadioOneDaily" value="1">Every</mat-radio-button>
                                <mat-form-field class="width-small">
                                    <input matInput #DaysOneDaily ng-model="DaysOneDaily" type="number" placeholder="Day(s)">                    
                                </mat-form-field>  
                            </div>
                            <div>
                                <mat-radio-button #RadioTwoDaily ng-model="RadioTwoDaily" value="2">Every week day</mat-radio-button>
                            </div>
                            <div>
                                Start time
                                <mat-form-field class="width-small">
                                    <input matInput #StartHoursDaily ng-model="StartHoursDaily" type="number" min="0" max="23" placeholder="Hour">                    
                                </mat-form-field>  
                                <mat-form-field class="width-small">
                                    <input matInput #StartMinutesDaily ng-model="StartMinutesDaily" type="number" min="0" max="59" placeholder="Minute">                    
                                </mat-form-field>  
                            </div>
                        </mat-radio-group>

                        <button mat-raised-button color="primary" class="tab-button" (click)="UpdateCronDaily(Cron, RadioOneDaily, RadioTwoDaily, DaysOneDaily, StartHoursDaily, StartMinutesDaily)">
                            Update Cron
                        </button> 
                    </div>
                </mat-tab>
                <mat-tab label="Weekly">
                    <div class="tab-padding">
                        <div>
                            <mat-checkbox #CheckMonday ng-model="CheckMonday">Monday</mat-checkbox>
                            <mat-checkbox #CheckTuesday ng-model="CheckTuesday">Tuesday</mat-checkbox>
                            <mat-checkbox #CheckWednesday ng-model="CheckWednesday">Wednesday</mat-checkbox>
                            <mat-checkbox #CheckThursday ng-model="CheckThursday">Thursday</mat-checkbox>
                        </div>
                        <div>
                            <mat-checkbox #CheckFriday ng-model="CheckFriday">Friday</mat-checkbox>
                            <mat-checkbox #CheckSaturday ng-model="CheckSaturday">Saturday</mat-checkbox>
                            <mat-checkbox #CheckSunday ng-model="CheckSunday">Sunday</mat-checkbox>
                        </div>  
                        <div>
                            Start time
                            <mat-form-field class="width-small">
                                <input matInput #StartHoursWeekly ng-model="StartHoursWeekly" type="number" min="0" max="23" placeholder="Hour">                    
                            </mat-form-field>  
                            <mat-form-field class="width-small">
                                <input matInput #StartMinutesWeekly ng-model="StartMinutesWeekly" type="number" min="0" max="59" placeholder="Minute">                    
                            </mat-form-field>  
                        </div>
                        <button mat-raised-button color="primary" class="tab-button" (click)="UpdateCronWeekly(
                                Cron,
                                CheckMonday, 
                                CheckTuesday, 
                                CheckWednesday, 
                                CheckThursday, 
                                CheckFriday, 
                                CheckSaturday,
                                CheckSunday,
                                StartHoursWeekly,StartMinutesWeekly)">
                            Update Cron
                        </button> 
                    </div>
                </mat-tab>
            </mat-tab-group>
        </div>
    </mat-grid-tile>
</mat-grid-list>

